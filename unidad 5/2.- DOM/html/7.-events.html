<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events</title>
    <link rel="stylesheet" type="text/css" href="../css/estilos.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@400;700&display=swap" rel="stylesheet">
    <script src="../js/7.-events.js" defer></script>
  </head>
  <body>
    <section class="contenedor-flex-vertical gap">
      <section class="contenedor-flex-vertical ai-center borde gap">
        <header class="contenedor-flex-vertical gap jc-center">
          <h2>Handling events</h2>
          <h3>how to create and remove event handlers as well as how to get information about the event launched</h3>
        </header>

        <article class="contenedor-flex-vertical gap borde jc-center">
          <h3>Attaching one or several event handlers</h3>
          <ul id="lista_botones1" class="contenedor-flex-fila gap jc-center">
            <li><button id="cambiaClase">Change button colour</button></li>
            <li><button id="cambiaTexto">Count clicks</button></li>
          </ul>
        </article>

        <article class="contenedor-flex-vertical gap borde jc-center">
          <h3>Reading event information</h3>
          <p>Events are stored in an object which provides additional information. Different types of events provide different properties</p>
          <p>Here you can practice with mouse events getting information about: type, currentTarget, target, istrusted, timeStamp, clientX, clientY and buttons pressed</p>            
          <p>context menu is disabled so you can check that button 2 (right button has been pressed)</p>
          <button id="informacionEvento">Event object information</button>
          <p id="texto_coordenadas" class="dp_none"></p>
        </article>

        <article class="contenedor-flex-vertical gap borde jc-center">
          <h3>Defining an event handler using an object instead of a function</h3>
          <p>Create a class with a constructor that attaches eventhandlers</p>
          <ul class="contenedor-flex-fila gap jc-center">
            <li><button id="eventhandler_object1">One event with object</button></li>
            <li><button id="eventhandler_object2">multiple events with object</button></li>
          </ul>
        </article>

        <article class="contenedor-flex-vertical gap borde jc-center">
          <h3>Using data attributes alongside objects to assign event handlers just once</h3>
          <p>There's no need to assign an event handler at each element. data attributes can be used to assign event handlers once</p>
          <ul id="botones_accion" class="contenedor-flex-fila gap jc-center">
            <li><button data-accion="save">Save</button></li>
            <li><button data-accion="load">Load</button></li>
            <li><button data-accion="search">Search</button></li>
          </ul>
          <p id="texto_botones_accion"></p>
        </article>

        <article class="contenedor-flex-vertical gap borde jc-center">
          <h3>Using data attributes</h3>
          <p>they can be used alongside event handlers to perform actions</p>
          <ul id="botones_accion" class="contenedor-flex-fila gap jc-center">
            <li>Counter 1: <input type="button" value="1" data-contador></li>
            <li>Counter 2: <input type="button" value="1" data-contador></li>
          </ul>
          <button data-oculta="subscribe-mail">Show subscription form</button>
          <form id="subscribe-mail" hidden>
           <input type="email" name="email" placeholder="email">
          </form>
        </article>

        <article class="contenedor-flex-vertical borde jc-center">
          <h3 id="hoverPara">Removing event listener (hover this text)</h3>
          <p id="caja_hover" hidden class="caja_mensajes"> </p>
          <button id="clickIt">Stop listening for events</button>
        </article>
      </section>


      <section id="bubbling_and_capturing" class="contenedor-flex-vertical ai-center borde gap">
        <header>
          <h3>Event propagation</h3>
          <p>The standard DOM Events describes 3 phases of event propagation:</p>
          <ol>
            <li>Capturing phase – the event goes all the way down from Window>Document>HTML>... to the element.</li>
            <li>Target phase – the event reached the target element. It is not handled separately, but at capturing and at bubbling phase</li>
            <li>Bubbling phase – the event bubbles all the way up from the element to ...HTML>Document>Window</li>
          </ol>
          <p>Event handlers have been created only for this section. They could've been created for the whole document, starting at window->document->html...</p>
        </header>
        <article id="bubbling_phase" class="borde">
          <h3>Bubbling</h3>
          <p>This is by default how events are handled by eventHandlers. Click at any place on this paragraph to console out how events are transmitted all the way up</p>
        </article>
        <article id="capturing_phase" class="contenedor-flex-vertical borde jc-center">
          <h3>Capturing</h3>
          <p>This is not standard way of capturing events. A third optional element in addEventListener is required to be true<br>
            Click on the paragraph to see how events are transmitted all the way down from where an event handler was defined to the element where it occurred</p>
        </article>
        <article id="stop_bubbling" class="borde">
          <h3>Stopping propagation</h3>
          <p>An eventHandler is defined at this paragraph. It won't allow bubbling. Do it unless there's a real reason</p>
        </article>
      </section>
  
      <section class="contenedor-flex-vertical ai-center borde gap" id="event_delegation">
        <header>
          <h3>Event delegation</h3>
        </header>
        <article id="handler_on_parent" class="borde">
          <h3>Capturing an event just on a parent element</h3>
          <p>An event handler on parent section has been previously defined, but there's no event handler at this section nor at this paragraph.<br>
              Click on the paragraph and watch console to see how this event is captured by the parent of its parent (section)</p>
        </article>
        <article class="contenedor-flex-vertical borde jc-center">
          <h3>Capturing a click event at table level</h3>
          <p>There's a click event handler for the whole table, not every cell<br>
          Click on any cell</p>
          <table id="tabla1">
            <tr>
              <th colspan="3"> Encabezado</th>
            </tr>
            <tr>
              <td>celda</td>
              <td>celda</td>
              <td>celda</td>
            </tr>
            <tr>
              <td>celda</td>
              <td>celda</td>
              <td>celda</td>
            </tr>
            <tr>
              <td>celda</td>
              <td>celda</td>
              <td>celda</td>
            </tr>
          </table>
        </article>



      </section>
      <section class="contenedor-flex-vertical borde jc-center gap">
        <header>
          <h3>UI Events</h3>
          <p>This section covers some of the most used events, but not all. click has already been discussed</p>
        </header>
        <article class="contenedor-flex-vertical borde jc-center">
          <h3>Mouse: mouseover and mouseout</h3>
          <p>There's a click event handler for the whole table, not every cell<br>
          Click on any cell</p>
          <table id="tabla2">
            <tr>
              <th colspan="3"> Encabezado</th>
            </tr>
            <tr>
              <td>celda</td>
              <td>celda</td>
              <td>celda</td>
            </tr>
            <tr>
              <td>celda</td>
              <td>celda</td>
              <td>celda</td>
              </td>
            </tr>
            <tr>
              <td>celda</td>
              <td>celda</td>
              <td>celda</td>
            </tr>
          </table>
        </article>

        <article class="contenedor-flex-vertical borde jc-center">
          <header>
            <h3>Pointer devices</h3>
            <p>Allow dealing with events of any kind of pointing devices such as pens, fingers at touchscreens or even mice</p>
            <p>Interesting events: pointerdown (button is pressed), pointermove y pointerup (button is released)</p>
            <p>Interesting properties:</p>
            <ul class="lista_viñetas">
              <li>isPrimary (=true for the first pointing device touching screen)</li>
              <li>pointerId a unique ID assigned to each finger, allows to track each finger movement along the screen</li>
              <li>width and height of the surface the pointing device (finger) is touching the screen (1 if it is a mouse)</li>
              <li>pressure from 0 (not pressure) to 1 (pressure). 0.5 if not supported</li>
            </ul>
          </header>
          <p>The surface below is showing pointerup event</p>
          <p id="caja_pointerup" class="caja_mensajes" data-accion="pointerup"> </p>
          <p>The surface below is showing pointerdown event</p>
          <p id="caja_pointerdown" class="caja_mensajes" data-accion="pointerdown"> </p>
          <p>The surface below is showing pointermove event</p>
          <p id="caja_pointermove" class="caja_mensajes" data-accion="pointermove"> </p>
        </article>

        <article class="contenedor-flex-vertical borde jc-center">
          <header>
            <h3>Keyboard events</h3>
            <p>Keyboard are not the only way of getting user inputs, so do not rely solely on them to react to users input</p>
            <p>interesting properties: code (physical key code) and key (character)</p>
            <p></p>            
          </header>
          <input type="text" id="introduccion_texto"  class="caja_teclado">
          <p>The surface below is showing keyup event</p>
          <p id="caja_keyup" class="caja_mensajes"> </p>
          <p>The surface below is showing keydown event</p>
          <p id="caja_keydown" class="caja_mensajes"> </p>
        </article>
        
        <article class="contenedor-flex-vertical borde jc-center">
          <h3>Scroll</h3>
          <p>Window object has a scroll eventlistener attached that shows up </p>
          <p>Scroll is imprecise. Page end could be detected 50-100px away from the real page end. Small amounts of pixels are ignored</p>
          <p>Scroll is elastic. A little further away from the page end could be reached at some browsers. The page will bounce back to normality</p>
          <button id="muestra_desplazamiento">Click to show number of pixels of scroll</button>
          <p id="pixeles_desplazamiento" class="fijo oculto"></p>
        </article>

        <article class="contenedor-flex-vertical borde jc-center">
          <h3>Forms</h3>
          <p>if more than one form is present, they can be referred:</p>
          <ul class="lista_viñetas">
            <li>by using their name: document.forms.formulario1.elements.uno.value</li>
            <li>by using their index: document.forms[0].elements.uno.value</li>
            <li>by using querySelector</li>
          </ul>
          <p>grouped elements, as checkboxes or radio buttons, can be accessed with formulario.elements.nombre[0]</p>
          <p>select controls has 3 properties: options, value and selectedIndex</p>
          <p>remarcable events: focus (focusin), blur (focusout), change, input, cut, copy, paste, submit</p>
          <form name="form1" class="contenedor-flex-vertical gap relativo">
            <input type="text" id="nombre" name="nombre" placeholder="nombre" minlength="4" maxlength="15" required>
            <p id="error" hidden>Usted se llama perico, corríjalo</p>
            <input type="text" id="apellidos" name="apellidos" placeholder="apellidos">
            <input type="email" id="correo" name="correo" placeholder="Correo electrónico">
            <input type="text" name="dni" placeholder="DNI" pattern="[0-9]{8}[A-Za-z]{1}" title="Debe poner 8 números y una letra" />
            <input type="number" name="edad" min="18" max="100" placeholder="Edad"/>
            <article class="contenedor-flex-fila">
              <label><input type="checkbox" name="options" value="first" checked> First option</label>
              <label><input type="checkbox" name="options" value="second"> Second option</label>
              <label><input type="checkbox" name="options" value="third" disabled> Third option</label>
            </article>
            <select name="selector_color">
              <option value="default.css">White Theme</option>
              <option value="red.css">Red Theme</option>
              <option value="blue.css">Blue Theme</option>
              <option value="green.css">Green Theme</option>
            </select>
            <input type="submit" value="Enviar">
          </form>
          <p id="caja_eventos_form" class="caja_mensajes"> </p>
        </article>

        <article class="contenedor-flex-vertical borde jc-center">
          <header>
            <h3>Page events</h3>
            <ul>
              <li>DOMContentLoaded: DOM is built, but external resources may have not been loaded</li>
              <li>load: DOM is built and external resources are loaded</li>
              <li>beforeunload/unload: user leaves the website</li>
            </ul>
          </header>
          <p>This is a random image loaded to delay the load of the page and to make noticeable the difference between DOMContentLoaded and load</p><img src="https://picsum.photos/200/300" alt="random image">
          <p>The surface below is showing page events</p>
          <p id="caja_eventos_pagina" class="caja_mensajes"> </p>
        </article>

      </section>
    </section>
  </body>
</html>